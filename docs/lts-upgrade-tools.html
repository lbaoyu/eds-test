<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AEM 6.5 LTS Side‑by‑Side Upgrade – Tools & Pre‑Upgrade Assessment (On‑Prem)</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      line-height: 1.5;
      color: #1f2933;
      padding: 24px;
      max-width: 980px;
      margin: 0 auto;
      background: #fafbfc;
    }
    h1, h2, h3 {
      color: #102a43;
    }
    h1 {
      border-bottom: 2px solid #d8e2ec;
      padding-bottom: 8px;
      margin-bottom: 16px;
    }
    h2 {
      margin-top: 32px;
      border-bottom: 1px solid #e1e7f0;
      padding-bottom: 4px;
    }
    h3 {
      margin-top: 24px;
    }
    p {
      margin: 8px 0 12px;
    }
    strong {
      color: #102a43;
    }
    code {
      font-family: "SFMono-Regular", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background: #f0f4f8;
      padding: 1px 4px;
      border-radius: 3px;
      font-size: 0.95em;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin: 12px 0 20px;
      font-size: 0.95em;
    }
    th, td {
      border: 1px solid #d8e2ec;
      padding: 8px 10px;
      vertical-align: top;
    }
    th {
      background: #f0f4f8;
      font-weight: 600;
      text-align: left;
    }
    ul {
      padding-left: 20px;
      margin: 8px 0 16px;
    }
    a {
      color: #1d6fba;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .note {
      background: #effcf6;
      border-left: 4px solid #2f855a;
      padding: 8px 10px;
      font-size: 0.92em;
      margin: 12px 0 20px;
    }
    .warn {
      background: #fff7e6;
      border-left: 4px solid #f6ad55;
      padding: 8px 10px;
      font-size: 0.92em;
      margin: 12px 0 20px;
    }
    .small {
      font-size: 0.9em;
      color: #616e7c;
    }
  </style>
</head>
<body>

<h1>AEM 6.5 LTS Side‑by‑Side Upgrade – Tools &amp; Pre‑Upgrade Assessment (On‑Prem)</h1>
<p class="small">
  This document summarizes the main tools and checks that an on‑premises AEM 6.5 customer should use when planning
  and executing a <strong>side‑by‑side upgrade</strong> to the AEM 6.5 Long‑Term Support (LTS) release. In a side‑by‑side
  approach, a new AEM 6.5 LTS environment is built and content/code are migrated into it, while the existing
  6.5 environment remains online until cutover.
</p>

<div class="note">
  <strong>Goal.</strong> Use these tools to validate compatibility (Pattern Detector + AEM Analyzer), build a clean AEM 6.5 LTS target stack,
  then safely migrate code and content from the existing AEM 6.5 environment with minimal risk and downtime.
</div>

<h2>1. Overview – Stages and Tooling for Side‑by‑Side</h2>

<p>For a side‑by‑side upgrade, we recommend the following stages:</p>

<ul>
  <li><strong>Assessment on the current (source) AEM 6.5</strong>: analyze custom code, repository health, deprecated features, and LTS‑specific compatibility.</li>
  <li><strong>Build &amp; harden the new (target) AEM 6.5 LTS stack</strong>: install AEM 6.5 LTS with Java 17/21 and apply configuration and security hardening.</li>
  <li><strong>Content &amp; code migration</strong>: migrate code and content using packages or repository tools, then validate.</li>
  <li><strong>Cutover &amp; decommissioning</strong>: switch traffic to the new environment, then retire the old one.</li>
</ul>

<p>
  Adobe’s official upgrade guidance (including planning and migration considerations) is here:<br>
  <a href="https://experienceleague.adobe.com/en/docs/experience-manager-65-lts/content/implementing/deploying/upgrading/upgrade"
     target="_blank" rel="noopener">
    Upgrading to AEM 6.5 LTS – official documentation
  </a>
</p>

<h2>2. Assessment Tools on the Existing AEM 6.5 Environment</h2>

<h3>2.1 AEM Pattern Detector (Compatibility &amp; Deprecation Analysis)</h3>

<p>
  The Pattern Detector is an Adobe‑provided analysis tool that inspects an AEM instance and reports usage of deprecated,
  removed, or potentially incompatible features. This is critical even for side‑by‑side upgrades, because the target LTS
  environment removes or changes certain features and libraries.
</p>

<p>
  <strong>Documentation:</strong><br>
  <a href="https://experienceleague.adobe.com/en/docs/experience-manager-65/content/implementing/deploying/upgrading/pattern-detector"
     target="_blank" rel="noopener">
    Assessing the Upgrade Complexity with the Pattern Detector
  </a>
</p>

<p>
  <strong>Download:</strong> the Pattern Detector is distributed as an AEM package from Adobe Software Distribution (requires login).<br>
  <a href="https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html"
     target="_blank" rel="noopener">
    Adobe Software Distribution – AEM Packages
  </a><br>
  Once logged in, search for “Pattern Detector” appropriate for AEM 6.5 and install it on a non‑production environment
  containing a copy of production content.
</p>

<table>
  <thead>
    <tr>
      <th>Purpose</th>
      <th>What it detects</th>
      <th>Typical usage (side‑by‑side)</th>
      <th>Outcome</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Compatibility Analysis</strong></td>
      <td>
        <ul>
          <li>Use of deprecated APIs and libraries.</li>
          <li>Overlays and customizations under <code>/libs</code>.</li>
          <li>Usage of legacy features removed or unsupported in LTS (e.g., classic UI, Communities, Screens, old commerce integrations).</li>
          <li>Repository structures or nodes that are no longer recommended.</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>Install Pattern Detector on a staging or cloned copy of the current AEM 6.5 production repo.</li>
          <li>Run it against author (and optionally publish) to get a full compatibility report.</li>
          <li>Use outputs to refine the new LTS architecture and migration scope.</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>A list of required code changes (e.g., replacing removed APIs or overlays) before deploying to the LTS environment.</li>
          <li>A list of content/feature areas that should be excluded, retired, or refactored as part of the migration.</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<div class="warn">
  <strong>Best practice.</strong> Run Pattern Detector on a production‑like copy of the repository to see real‑world usage,
  not just on a dev instance with limited content.
</div>

<h3>2.2 AEM Analyzer (6.5 LTS Upgrade Complexity &amp; Readiness)</h3>

<p>
  The <strong>AEM Analyzer for 6.5 LTS</strong> builds on the Pattern Detector and other checks to provide a <strong>consolidated, LTS‑specific report</strong>
  of upgrade complexity and incompatibilities. It helps you understand not only <em>what</em> is incompatible, but also
  <em>how severe</em> it is and how to prioritize remediation.
</p>

<p>
  <strong>Documentation:</strong><br>
  <a href="https://experienceleague.adobe.com/en/docs/experience-manager-65-lts/content/implementing/deploying/upgrading/aem-analyzer"
     target="_blank" rel="noopener">
    Assessing the Upgrade Complexity with the AEM Analyzer
  </a>
</p>

<p><strong>What AEM Analyzer Does</strong></p>
<ul>
  <li>Aggregates Pattern Detector output and additional checks into categories, such as:
    <ul>
      <li>Application functionality that <strong>must be refactored</strong>.</li>
      <li>Repository items that <strong>must be moved</strong> to supported locations.</li>
      <li><strong>Configuration issues</strong> (e.g., deprecated or obsolete OSGi properties).</li>
      <li>Features and bundles <strong>removed or unsupported</strong> on 6.5 LTS.</li>
      <li><strong>Java and Guava API usage</strong> that must be removed or updated for the LTS baseline.</li>
    </ul>
  </li>
  <li>Assigns <strong>importance levels</strong> (<code>INFO</code>, <code>ADVISORY</code>, <code>CRITICAL</code>) to each finding, enabling you to prioritize work.</li>
  <li>Provides a structured report view and CSV export for planning and tracking.</li>
</ul>

<p><strong>Typical Finding Categories – Example Scenarios</strong></p>
<ul>
  <li><strong>Application functionality to refactor</strong> – e.g., a custom bundle imports <code>com.google.common.base.Optional</code> with a version range incompatible with the Guava version shipped in 6.5 LTS, causing a CRITICAL finding.</li>
  <li><strong>Repository items to move</strong> – e.g., project configuration stored under <code>/etc/acme/config</code> instead of <code>/conf/acme</code>, flagged as ADVISORY.</li>
  <li><strong>Configuration issues</strong> – e.g., OSGi configs overriding properties that no longer exist or are ignored in LTS.</li>
  <li><strong>Removed/unsupported features</strong> – e.g., overlays for a legacy console that has been removed in 6.5 LTS, leading to CRITICAL findings.</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Purpose</th>
      <th>What it provides</th>
      <th>Typical usage (side‑by‑side)</th>
      <th>Outcome</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>LTS‑specific Upgrade Assessment</strong></td>
      <td>
        <ul>
          <li>Aggregated report with categorized findings and importance levels.</li>
          <li>High‑level view of 6.5 LTS upgrade complexity.</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>Install AEM Analyzer on the same staging/clone used for Pattern Detector.</li>
          <li>Run Analyzer after Pattern Detector to generate the <strong>AEM 6.5 LTS Analyzer Report</strong>.</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>Prioritized list of <strong>CRITICAL</strong> and <strong>ADVISORY</strong> issues that must be addressed before running on LTS.</li>
          <li>Work plan for code refactoring, repository restructuring, and configuration cleanup.</li>
          <li>Basis for effort estimation, project planning, and communication with stakeholders.</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><strong>Pattern Detector vs AEM Analyzer – How They Complement Each Other</strong></p>
<table>
  <thead>
    <tr>
      <th>Tool</th>
      <th>Role</th>
      <th>Level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Pattern Detector</strong></td>
      <td>Deep <strong>technical scan</strong> for deprecated APIs, overlays, and repository patterns.</td>
      <td>Low‑level, detailed.</td>
    </tr>
    <tr>
      <td><strong>AEM Analyzer (LTS)</strong></td>
      <td>Consolidated <strong>upgrade readiness report</strong>; categorizes issues and assigns importance.</td>
      <td>Higher‑level, planning‑oriented.</td>
    </tr>
  </tbody>
</table>

<h3>2.3 Custom Code Static Analysis (Build‑Time)</h3>

<p>
  Standard Java static analysis tools should be used to validate custom code for <strong>Java 17/21 compatibility</strong>
  and removal of legacy dependencies that are no longer provided by AEM LTS (for example, platform‑bundled Guava).
</p>

<table>
  <thead>
    <tr>
      <th>Purpose</th>
      <th>What to check</th>
      <th>Typical tools</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Java 21 Readiness</strong></td>
      <td>
        <ul>
          <li>Code compiles and tests successfully with Java 21.</li>
          <li>No usage of removed or internal JDK APIs.</li>
          <li>Removal of PermGen‑related options (no longer valid in newer JVMs).</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>Maven/Gradle builds targeting Java 21 (<code>source</code>/<code>target</code> set to 21).</li>
          <li>Static analysis (SpotBugs, PMD, Checkstyle) with up‑to‑date rules.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Dependency Cleanup</strong></td>
      <td>
        <ul>
          <li>No reliance on platform‑bundled Guava or commons‑collections 3.x.</li>
          <li>Dependencies declared explicitly and kept at supported versions.</li>
        </ul>
      </td>
      <td>
        <ul>
          <li><code>mvn dependency:tree</code> or equivalent to inspect dependencies.</li>
          <li>Software Composition Analysis (SCA) / vulnerability scanning tools.</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<h3>2.4 Repository Health &amp; Maintenance on the Source Environment</h3>

<p>
  Even in a side‑by‑side scenario, it is important to ensure the source environment is in good health
  before content is exported or migrated.
</p>

<p>
  Maintenance documentation:<br>
  <a href="https://experienceleague.adobe.com/en/docs/experience-manager-65/content/implementing/deploying/maintenance/maintenance-tasks"
     target="_blank" rel="noopener">
    Maintenance tasks – AEM 6.5 documentation
  </a>
</p>

<table>
  <thead>
    <tr>
      <th>Purpose</th>
      <th>Tool / Mechanism</th>
      <th>What to run (on source)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Reduce Repository Size Before Export</strong></td>
      <td>Built‑in maintenance tasks.</td>
      <td>
        <ul>
          <li>Workflow purge for completed and outdated workflow instances.</li>
          <li>Audit log purge in line with retention policies.</li>
          <li>Version purge to prune very old or unnecessary version history.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Ensure Repository Consistency</strong></td>
      <td>Offline Revision Cleanup (TarMK) / consistency checks.</td>
      <td>
        <ul>
          <li>Run offline revision cleanup where appropriate.</li>
          <li>Check logs for any repository consistency issues before export.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Data Store Cleanliness</strong></td>
      <td>Datastore Garbage Collection.</td>
      <td>
        <ul>
          <li>Run datastore garbage collection to remove unreferenced binaries (FileDataStore / S3 / Azure Blob).</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<h3>2.5 Index and Query Assessment (Source)</h3>

<p>
  Understanding how the current application uses queries and indexes will help size and configure indices properly on
  the new LTS environment.
</p>

<p>
  Query and indexing documentation:<br>
  <a href="https://experienceleague.adobe.com/en/docs/experience-manager-65/content/implementing/deploying/queries-and-indexing/best-practices"
     target="_blank" rel="noopener">
    Best practices for queries and indexing – AEM 6.5
  </a>
</p>

<table>
  <thead>
    <tr>
      <th>Purpose</th>
      <th>What to examine</th>
      <th>How to use it for side‑by‑side</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Index Definitions</strong></td>
      <td>
        <ul>
          <li>Custom index definitions under <code>/oak:index</code>.</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>Document all custom indexes to be recreated or adjusted on the target LTS environment.</li>
          <li>Plan any index redesigns in line with best practices.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Query Hotspots</strong></td>
      <td>
        <ul>
          <li>Frequently used or slow queries (search, listings, reporting).</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>Capture baseline performance metrics prior to migration.</li>
          <li>Use AEM’s query tools (for example, explain query) to understand index usage; ensure equivalent or improved indexing on LTS.</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<h2>3. Building the New AEM 6.5 LTS Target Environment</h2>

<h3>3.1 AEM 6.5 LTS Quickstart &amp; Java 17/21</h3>

<p>
  The new environment is built as a fresh AEM 6.5 LTS installation running on a supported Java version
  (Java 17 or 21 – typically 21 for new deployments).
</p>

<ul>
  <li><strong>AEM 6.5 LTS Quickstart download</strong> (requires login):<br>
    <a href="https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html"
       target="_blank" rel="noopener">
      Adobe Software Distribution – AEM 6.5
    </a>
  </li>
  <li><strong>Java 17/21</strong> from your preferred vendor (e.g., Oracle, Eclipse Temurin, Red Hat) installed on all AEM nodes.</li>
</ul>

<p>
  Use the standard AEM 6.5 installation and hardening guides to build the new author/publish tiers with the desired topology,
  ensuring:
</p>
<ul>
  <li>Correct runmodes and port assignments.</li>
  <li>Dispatcher/web server configured for the new environment.</li>
  <li>Security and networking aligned with organizational standards.</li>
</ul>

<h3>3.2 Deploying Updated Code &amp; Index Definitions</h3>

<p>
  Once the base AEM 6.5 LTS environment is running:</p>
<ul>
  <li>Deploy the <strong>updated application code</strong> that has been made Java 17/21 and LTS‑compatible, based on Pattern Detector and AEM Analyzer findings.</li>
  <li>Deploy required <strong>index definitions</strong> and configurations (ideally in code, via content packages and OSGi configs).</li>
  <li>Run smoke tests to confirm the application behaves correctly in the new environment before content migration.</li>
</ul>

<h2>4. Content Migration Tools &amp; Options (Side‑by‑Side)</h2>

<p>
  For AEM 6.5 to AEM 6.5 LTS on‑prem, common content migration approaches include:
</p>

<table>
  <thead>
    <tr>
      <th>Approach</th>
      <th>Tooling</th>
      <th>Usage &amp; notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Content Packages</strong></td>
      <td>
        AEM Package Manager (<code>/crx/packmgr</code>), with packages created via:
        <ul>
          <li>AEM Package Manager UI</li>
          <li>FileVault / vlt‑rcp</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>Suitable when the content structure is stable and compatible.</li>
          <li>Typically done in batches (sites, DAM folders, configurations).</li>
          <li>Requires careful testing to ensure no versioning / node type conflicts when importing into LTS.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Repository Copy / Oak Tools</strong></td>
      <td>
        Oak tooling such as <code>oak-run</code> and <code>oak-upgrade</code> (for advanced scenarios).<br>
        Oak documentation:<br>
        <a href="https://jackrabbit.apache.org/oak/docs/oak-run.html"
           target="_blank" rel="noopener">
          Oak-run documentation
        </a>
      </td>
      <td>
        <ul>
          <li>Used in more specialized cases where large volumes of content or specific node store layouts are involved.</li>
          <li>Requires strong familiarity with Oak and AEM repository internals.</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<div class="warn">
  <strong>Important.</strong> For each migration path (packages or Oak tools), test on non‑production first,
  and consider a dry‑run migration to the LTS environment to measure timing and uncover structural issues.
</div>

<h2>5. Post‑Migration Validation Tools</h2>

<p>After content and code have been migrated into the AEM 6.5 LTS environment, use the following tools and checks:</p>

<ul>
  <li><strong>OSGi Console</strong> – verify all relevant bundles are in the <em>Active</em> state and compare with a clean 6.5 LTS instance if needed.</li>
  <li><strong>JMX / Monitoring</strong> – check repository index status, async indexers, and queues.</li>
  <li><strong>Log Review</strong> – watch for errors related to missing content, node types, or removed features.</li>
  <li><strong>Functional &amp; Performance Tests</strong> – run automated tests and smoke tests:
    <ul>
      <li>Authoring (create/edit/publish pages, manage assets, workflows).</li>
      <li>Public site usage (key user journeys, search, navigation, forms).</li>
    </ul>
  </li>
  <li><strong>Optional: Re‑run AEM Analyzer on LTS</strong> – as a final readiness check:
    <ul>
      <li>Run Analyzer on a pre‑prod LTS instance with migrated content and code.</li>
      <li>Confirm no new <strong>CRITICAL</strong> findings are introduced by migration.</li>
      <li>Review remaining <strong>ADVISORY/INFO</strong> items as backlog/hardening tasks.</li>
    </ul>
  </li>
</ul>

<h2>6. Summary – Side‑by‑Side Upgrade Tool Checklist</h2>

<ul>
  <li>On the <strong>current AEM 6.5 (source/clone)</strong>:
    <ul>
      <li>Run <strong>Pattern Detector</strong> and review compatibility findings.</li>
      <li>Run <strong>AEM Analyzer (6.5 LTS)</strong> to get a categorized, prioritized upgrade report.</li>
      <li>Perform <strong>code static analysis</strong> for Java 17/21 and dependency cleanup.</li>
      <li>Run repository <strong>maintenance tasks</strong> (purges, cleanup, datastore GC).</li>
      <li>Document <strong>custom indexes</strong> and <strong>query hotspots</strong>.</li>
    </ul>
  </li>
  <li>On the <strong>new AEM 6.5 LTS</strong>:
    <ul>
      <li>Install AEM 6.5 LTS (quickstart) with supported <strong>Java 17/21</strong>.</li>
      <li>Deploy updated application code and index definitions, incorporating Analyzer findings.</li>
      <li>Migrate content using packages or repository tools.</li>
      <li>Run <strong>OSGi/JMX checks</strong>, log review, and full test suites.</li>
      <li>Optionally, <strong>re‑run AEM Analyzer</strong> on pre‑prod to validate readiness.</li>
    </ul>
  </li>
</ul>

<p class="small">
  With Pattern Detector and the AEM Analyzer as the backbone of your assessment, a side‑by‑side upgrade to AEM 6.5 LTS
  becomes a controlled, data‑driven migration into a clean, modernized environment, rather than a risky in‑place change
  to the existing system.
</p>

</body>
</html>
